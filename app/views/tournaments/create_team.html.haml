- ipl_teams = [ { "name" => "CSK", "color" => "#FDB913" }, { "name" => "MI",  "color" => "#004BA0" }, { "name" => "RCB", "color" => "#D11D26" }, { "name" => "KKR", "color" => "#3A225D" }, { "name" => "SRH", "color" => "#FF822E" }, { "name" => "RR",  "color" => "#EA1B85" }, { "name" => "DC",  "color" => "#00008B" }, { "name" => "GT",  "color" => "#1B2133" }]
- team_pair = ipl_teams.sample(2)
- random_rivalry = { "team1" => team_pair[0]["name"], "color1" => team_pair[0]["color"], "team2" => team_pair[1]["name"], "color2" => team_pair[1]["color"] }


.min-h-screen.bg-slate-50.pb-20.px-4
  -# Header
  .max-w-md.mx-auto.text-center.py-8
    %h1.text-3xl.font-black.text-slate-800.tracking-tight Matchmaker
    %p.text-slate-400.text-sm.mt-1 Pick your squad for today

  -# RESULTS AREA (Above selection, hidden initially)
  #results-area.max-w-5xl.mx-auto.mb-12.hidden{ data: { points: @final_avg_hash.to_json } }
    .flex.justify-center.mb-8
      #strength-badge.hidden.px-4.py-2.rounded-full.text-xs.font-black.tracking-widest.shadow-sm

    .grid.grid-cols-1.md:grid-cols-3.gap-6
      -# Team A Card
      .bg-white.shadow-xl.p-6.border.border-slate-100{class: "rounded-[2.5rem]"}
        .flex.items-center.justify-between.mb-6.px-2
          %h3#team1-name.text-xl.font-black{style: "color: #{random_rivalry['color1']}"}= random_rivalry["team1"]
          %p#team1-strength.font-bold.text-slate-400{class: "text-[10px]"} Strength: 0
          %span#team1-count.font-mono.bg-blue-50.px-3.py-1.rounded-full.text-sm{style: "color: #{random_rivalry['color1']}"} 0
        #team1.grid.grid-cols-3.gap-y-6.gap-x-2
      
      -# Common Player Card
      #common-container.hidden.flex.flex-col.justify-center
        .bg-indigo-600.shadow-xl.p-6.text-white.text-center.relative.overflow-hidden{class: "rounded-[2.5rem]"}
          .absolute.top-0.left-0.w-full.h-full.bg-white.opacity-5.pointer-events-none
          %p.font-black.uppercase.mb-4.opacity-80{class: "text-[10px] tracking-[0.2em]"} Common
          #common.flex.flex-col.items-center
      
      -# Team B Card
      .bg-white.shadow-xl.p-6.border.border-slate-100{class: "rounded-[2.5rem]"}
        .flex.items-center.justify-between.mb-6.px-2
          %h3#team2-name.text-xl.font-black{style: "color: #{random_rivalry['color2']}"}= random_rivalry["team2"]
          %p#team2-strength.font-bold.text-slate-400{class: "text-[10px]"} Strength: 0
          %span#team2-count.font-mono.bg-emerald-50.px-3.py-1.rounded-full.text-sm{style: "color: #{random_rivalry['color2']}"} 0
        #team2.grid.grid-cols-3.gap-y-6.gap-x-2

  -# SELECTION AREA
  .max-w-2xl.mx-auto
    .bg-white.shadow-2xl.shadow-slate-200.p-8.border.border-slate-100{class: "rounded-[2.5rem]"}
      .grid.grid-cols-3.sm:grid-cols-4.gap-4
        - @players.each do |p|
          %label.relative.flex.flex-col.items-center.group.cursor-pointer
            -# Use asset_path(p["photo_name"]) to get the fingerprinted URL
            - player_data = { id: p["id"], name: p["name"], photo: asset_path(p["photo_name"]) }.to_json
            = check_box_tag "players[]", player_data, false, class: "player_shuffle hidden"
            
            .relative.w-16.h-16.rounded-full.p-1.avatar-box
              -# Use image_tag normally here
              = image_tag p["photo_name"], class: "w-full h-full rounded-full object-cover"          

            %span.mt-2.sm:text-xs.font-bold.text-slate-50.bg-slate-800.px-2.py-0.5.rounded-md.text-center.w-full.truncate{class: "text-[11px]"}= p["name"]

      .mt-10
        = button_tag id: "create_team_button", class: "w-full py-5 bg-slate-900 text-white rounded-2xl font-black text-lg shadow-2xl hover:bg-indigo-600 transition-all active:scale-95 flex items-center justify-center gap-3" do
          %span Generate Matchup
          %svg.w-5.h-5{fill: "none", stroke: "currentColor", viewBox: "0 0 24 24"}
            %path{d: "M13 10V3L4 14h7v7l9-11h-7z", "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2"}